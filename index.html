<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Esame di Stato - Dipartimento di Lettere</title>
<style>
:root { --primary: #630d0d; --gold: #b38b59; --bg: #f4f1ea; }
body { font-family: 'Palatino', serif; background-color: var(--bg); padding: 20px; }
.app-container { max-width: 850px; margin: 0 auto; background: #fff; border: 1px solid #dcd0b9; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; }
.header { background: var(--primary); color: white; padding: 20px; text-align: center; border-bottom: 5px solid var(--gold); }
.content { padding: 30px; }

/* Timer Style */
.timer-box { font-size: 1.5em; font-weight: bold; color: #e74c3c; text-align: right; margin-bottom: 10px; }
.bar-bg { background: #eee; height: 10px; border-radius: 5px; margin-bottom: 20px; }
.bar-fill { background: var(--gold); height: 100%; width: 0%; transition: 0.5s; border-radius: 5px; }

.btn-opt { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; background: #fff; cursor: pointer; text-align: left; font-size: 1.1em; border-radius: 5px; }
.btn-opt:hover { background: #fdfaf0; border-color: var(--gold); }

#modal-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:100; justify-content:center; align-items:center; }
.modal { background:white; padding:30px; max-width:500px; border-radius:8px; text-align:center; border-top:10px solid var(--primary); }

/* Certificate Style */
#certificate { display: none; border: 10px double var(--gold); padding: 40px; text-align: center; background: white; margin-top: 20px; position: relative; }
#certificate h1 { font-family: 'Old English Text MT', serif; color: var(--primary); }
.recap-item { margin-top: 10px; padding: 10px; border-left: 4px solid #e74c3c; background: #fff5f5; text-align: left; font-size: 0.9em; }
.btn-action { background: var(--primary); color: white; border: none; padding: 15px 25px; cursor: pointer; border-radius: 4px; font-weight: bold; margin: 5px; }
</style>
</head>
<body>

<div class="app-container" id="main-app">
<div class="header">
<h1>DIPARTIMENTO DI LETTERE</h1>
<p>Certificazione di Competenze Grammaticali-Attività creata con l'aiuto dell'IA</p>
</div>

<div class="content" id="setup">
<h2>Benvenuto, Studente</h2>
<p>Inserisci il tuo nome per iniziare l'esame (50 quesiti - 30s l'uno):</p>
<input type="text" id="student-name" placeholder="Nome e Cognome" style="width: 100%; padding: 10px; margin-bottom: 20px;">
<button class="btn-action" onclick="startQuiz()">INIZIA ESAME</button>
</div>

<div class="content" id="quiz-ui" style="display:none;">
<div class="timer-box">Tempo: <span id="timer">30</span>s</div>
<div class="bar-bg"><div id="bar-fill" class="bar-fill"></div></div>
<h3 id="q-text"></h3>
<div id="options"></div>
</div>

<div class="content" id="results" style="display:none;">
<div id="certificate">
<p>Si attesta che lo studente</p>
<h2 id="cert-name"></h2>
<p>ha completato l'esame di grammatica con il punteggio di</p>
<h1 id="cert-score"></h1>
<p><em>Rilasciato dal Dipartimento di Lettere Digitale</em></p>
</div>
<h3>Revisione Errori</h3>
<div id="recap-list"></div>
<button class="btn-action" onclick="window.print()">STAMPA CERTIFICATO</button>
<button class="btn-action" style="background:#777" onclick="location.reload()">RIPROVA</button>
</div>
</div>

<div id="modal-overlay">
<div class="modal">
<h3 id="m-title"></h3>
<p id="m-text"></p>
<button class="btn-action" onclick="nextQuestion()">PROSEGUI</button>
</div>
</div>

<script>
const db = [
// 1-25 PARTI VARIABILI
{q: "Qual è un nome collettivo?", a: ["Cani", "Sciame", "Bello"], c: 1, e: "Indica un insieme di api."},
{q: "L'articolo 'dei' è:", a: ["Determinativo", "Partitivo", "Indeterminativo"], c: 1, e: "Indica una parte indefinita."},
{q: "Il nome 'nipote' è di genere:", a: ["Comune", "Promiscuo", "Mobile"], c: 0, e: "Il genere è dato dall'articolo."},
{q: "Superlativo assoluto di 'alto':", a: ["Il più alto", "Altissimo", "Molto più alto"], c: 1, e: "Grado massimo senza confronto."},
{q: "In 'Questo libro è mio', 'mio' è:", a: ["Aggettivo", "Pronome", "Articolo"], c: 1, e: "Sostituisce il nome libro."},
// ... [Il resto delle 50 domande rimane lo stesso del database precedente]
{q: "Parte invariabile che unisce frasi:", a: ["Avverbio", "Congiunzione", "Nome"], c: 1, e: "Serve a legare elementi logici."}
];

// Per brevità in questa demo ho messo 6 domande, ma puoi incollare tutto il db di 50 qui sopra.

let current = 0; let score = 0; let name = ""; let timer; let timeLeft = 30; let mistakes = [];

function startQuiz() {
name = document.getElementById('student-name').value || "Studente Anonimo";
document.getElementById('setup').style.display = 'none';
document.getElementById('quiz-ui').style.display = 'block';
loadQ();
}

function loadQ() {
timeLeft = 30;
document.getElementById('timer').innerText = timeLeft;
const q = db[current];
document.getElementById('q-text').innerText = `${current+1}. ${q.q}`;
document.getElementById('bar-fill').style.width = `${(current/db.length)*100}%`;
const opts = document.getElementById('options'); opts.innerHTML = '';
q.a.forEach((t, i) => {
const b = document.createElement('button'); b.className = 'btn-opt'; b.innerText = t;
b.onclick = () => check(i); opts.appendChild(b);
});
timer = setInterval(countDown, 1000);
}

function countDown() {
timeLeft--;
document.getElementById('timer').innerText = timeLeft;
if(timeLeft <= 0) { clearInterval(timer); check(-1); }
}

function check(idx) {
clearInterval(timer);
const q = db[current];
const correct = idx === q.c;
if(correct) score++;
else mistakes.push({q: q.q, c: q.a[q.c]});

document.getElementById('m-title').innerText = correct ? "Corretto!" : "Sbagliato!";
document.getElementById('m-text').innerText = q.e;
document.getElementById('modal-overlay').style.display = 'flex';
}

function nextQuestion() {
document.getElementById('modal-overlay').style.display = 'none';
current++;
if(current < db.length) loadQ(); else showEnd();
}

function showEnd() {
document.getElementById('quiz-ui').style.display = 'none';
document.getElementById('results').style.display = 'block';
document.getElementById('certificate').style.display = 'block';
document.getElementById('cert-name').innerText = name;
document.getElementById('cert-score').innerText = `${score} / ${db.length}`;
const list = document.getElementById('recap-list');
mistakes.forEach(m => {
list.innerHTML += `<div class="recap-item"><strong>${m.q}</strong> - Corretto: ${m.c}</div>`;
});
}
</script>
</body>
</html>
